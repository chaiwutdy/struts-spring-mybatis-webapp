<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.TNdcreceivedMapperExt">
  <resultMap id="BaseResultMap" type="com.model.TNdcreceived">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 11 16:09:56 ICT 2017.
    -->
    <id column="OID" jdbcType="VARCHAR" property="oid" />
    <result column="FRAMENO" jdbcType="VARCHAR" property="frameno" />
    <result column="ENGINENO" jdbcType="VARCHAR" property="engineno" />
    <result column="INSPECTIONRESULT" jdbcType="VARCHAR" property="inspectionresult" />
    <result column="ISEXPORT" jdbcType="VARCHAR" property="isexport" />
    <result column="FACTORYCOLOR" jdbcType="VARCHAR" property="factorycolor" />
    <result column="COLORCODEDESCRIPTION" jdbcType="VARCHAR" property="colorcodedescription" />
    <result column="FACTORYTYPE" jdbcType="VARCHAR" property="factorytype" />
    <result column="TYPECODEDESCRIPTION" jdbcType="VARCHAR" property="typecodedescription" />
    <result column="CURRENTLOCATIONID" jdbcType="DECIMAL" property="currentlocationid" />
    <result column="EXPORTCOUNTRY" jdbcType="VARCHAR" property="exportcountry" />
    <result column="PROCESSROUND" jdbcType="DECIMAL" property="processround" />
    <result column="RECEIVEDDT" jdbcType="VARCHAR" property="receiveddt" />
    <result column="RECEIVEDDATE" jdbcType="DECIMAL" property="receiveddate" />
    <result column="MODEL" jdbcType="VARCHAR" property="model" />
    <result column="RFIDTAG" jdbcType="VARCHAR" property="rfidtag" />
    <result column="CHECKEROID" jdbcType="VARCHAR" property="checkeroid" />
    <result column="ISVQJUDGE" jdbcType="VARCHAR" property="isvqjudge" />
    <result column="TSTYPE" jdbcType="VARCHAR" property="tstype" />
    <result column="STATUS" jdbcType="VARCHAR" property="status" />
    <result column="CREATEBY" jdbcType="VARCHAR" property="createby" />
    <result column="CREATEDT" jdbcType="VARCHAR" property="createdt" />
    <result column="MODIFYBY" jdbcType="VARCHAR" property="modifyby" />
    <result column="MODIFYDT" jdbcType="VARCHAR" property="modifydt" />
    <result column="CARSTATUS" jdbcType="VARCHAR" property="carstatus" />
    <result column="RECEIVEDTIME" jdbcType="DECIMAL" property="receivedtime" />
    <result column="FACTORYMODEL" jdbcType="VARCHAR" property="factorymodel" />
    <result column="SALEMODEL" jdbcType="VARCHAR" property="salemodel" />
    <result column="SALECOLOR" jdbcType="VARCHAR" property="salecolor" />
    <result column="SALETYPE" jdbcType="VARCHAR" property="saletype" />
    <result column="MTOC" jdbcType="VARCHAR" property="mtoc" />
    <result column="EXCISETAX" jdbcType="VARCHAR" property="excisetax" />
    <result column="AFOFFDATE" jdbcType="DECIMAL" property="afoffdate" />
    <result column="AFOFFTIME" jdbcType="DECIMAL" property="afofftime" /> 
    <result column="FACTORYNO" jdbcType="DECIMAL" property="factoryno" />
    <result column="KDLOTNO" jdbcType="VARCHAR" property="kdlotno" />
    <result column="PLANCODE" jdbcType="VARCHAR" property="plancode" />
  </resultMap>
  
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 11 16:09:56 ICT 2017.
    -->
    OID, FRAMENO, ENGINENO, INSPECTIONRESULT, ISEXPORT, FACTORYCOLOR, COLORCODEDESCRIPTION, 
    FACTORYTYPE, TYPECODEDESCRIPTION, CURRENTLOCATIONID, EXPORTCOUNTRY, PROCESSROUND, 
    RECEIVEDDT, RECEIVEDDATE, MODEL, RFIDTAG, CHECKEROID, ISVQJUDGE, TSTYPE, STATUS, 
    CREATEBY, CREATEDT, MODIFYBY, MODIFYDT, CARSTATUS, RECEIVEDTIME, FACTORYMODEL, SALEMODEL, 
    SALECOLOR, SALETYPE, MTOC, EXCISETAX, AFOFFDATE, AFOFFTIME, FACTORYNO, KDLOTNO, PLANCODE
  </sql>
  <select id="selectByExample"  resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 11 16:09:56 ICT 2017.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    FROM T_NDCRECEIVED t
		WHERE t.RFIDTAG IN (
      SELECT DISTINCT RFIDTAG
      FROM T_NDCMAINTRANSACTION 
      WHERE STARTDATE = TO_CHAR(SYSDATE-1,'yyyyMMdd'))
		AND t.RECEIVEDDATE = ( SELECT MAX(RECEIVEDDATE) FROM T_NDCRECEIVED WHERE RFIDTAG = t.RFIDTAG)
  </select>
  
</mapper>